{"version":3,"sources":["App.js","index.js","i18n.js"],"names":["_meilisearch_instant_meilisearch__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","react__WEBPACK_IMPORTED_MODULE_2__","react__WEBPACK_IMPORTED_MODULE_2___default","n","react_i18next__WEBPACK_IMPORTED_MODULE_3__","react_instantsearch__WEBPACK_IMPORTED_MODULE_4__","react_instantsearch__WEBPACK_IMPORTED_MODULE_5__","react_instantsearch__WEBPACK_IMPORTED_MODULE_6__","react_instantsearch__WEBPACK_IMPORTED_MODULE_7__","react_instantsearch__WEBPACK_IMPORTED_MODULE_8__","react_instantsearch__WEBPACK_IMPORTED_MODULE_9__","react_instantsearch__WEBPACK_IMPORTED_MODULE_10__","react_instantsearch__WEBPACK_IMPORTED_MODULE_11__","react_instantsearch__WEBPACK_IMPORTED_MODULE_12__","searchClient","instantMeiliSearch","finitePagination","refreshPage","window","location","reload","validInitialConsonants","Set","doubleConsonants","ㄳ","ㄵ","ㄶ","ㄺ","ㄻ","ㄼ","ㄽ","ㄾ","ㄿ","ㅀ","ㅄ","Hit","_ref","hit","t","useTranslation","lyricsSnippet","_highlightResult","lyrics","highlightedLyrics","snippet","value","highlightTagStart","indexOf","highlightTagEnd","highlightedText","slice","contextBeforeStart","lastIndexOf","Math","max","contextBefore","contextAfterEnd","min","length","contextAfter","contextSnippet","concat","React","createElement","className","dangerouslySetInnerHTML","__html","getMatchedLyricsSnippet","key","id","Highlight","attribute","tagName","Snippet","youtube_url","href","target","rel","App","i18n","onChange","e","lng","changeLanguage","defaultValue","language","onClick","style","cursor","color","textDecoration","role","aria-label","InstantSearch","indexName","SortBy","defaultrefinement","items","label","RefinementList","Configure","hitsPerPage","attributesToSnippet","snippetEllipsisText","SearchBox","autoFocus","placeholder","queryHook","query","refine","input","result","r","has","push","join","segmentConsonants","Hits","hitComponent","Pagination","showLast","totalPages","__webpack_exports__","process","global","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","react_dom__WEBPACK_IMPORTED_MODULE_1__","react_dom__WEBPACK_IMPORTED_MODULE_1___default","_App__WEBPACK_IMPORTED_MODULE_2__","env","ReactDOM","render","StrictMode","Suspense","fallback","document","getElementById","i18next__WEBPACK_IMPORTED_MODULE_0__","i18next_browser_languagedetector__WEBPACK_IMPORTED_MODULE_1__","react_i18next__WEBPACK_IMPORTED_MODULE_2__","_locales_en_translation_json__WEBPACK_IMPORTED_MODULE_3__","_locales_es_translation_json__WEBPACK_IMPORTED_MODULE_4__","_locales_fr_translation_json__WEBPACK_IMPORTED_MODULE_5__","_locales_ja_translation_json__WEBPACK_IMPORTED_MODULE_6__","_locales_ko_translation_json__WEBPACK_IMPORTED_MODULE_7__","_locales_ru_translation_json__WEBPACK_IMPORTED_MODULE_8__","resources","ko","translation","translationKO","en","translationEN","ru","translationRU","ja","translationJA","es","translationES","fr","translationFR","use","initReactI18next","LanguageDetector","init","fallbackLng","debug","interpolation","escapeValue"],"mappings":"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","file":"static/js/main.8314ddaf.chunk.js","sourcesContent":["import { instantMeiliSearch } from \"@meilisearch/instant-meilisearch\";\nimport \"instantsearch.css/themes/algolia-min.css\";\nimport React from \"react\";\nimport { useTranslation } from 'react-i18next';\nimport {\n  Configure,\n  Highlight,\n  Hits,\n  InstantSearch,\n  Pagination,\n  RefinementList,\n  SearchBox,\n  Snippet,\n  SortBy,\n} from \"react-instantsearch\";\nimport \"./App.css\";\nimport \"./Modal.css\";\n\nconst { searchClient } = instantMeiliSearch(\n  \"https://csw-meilisearch.up.railway.app\",\n  \"40db54d9ebd0d8808f4a1d3583422d15530936254ee7dd7c2ce81c96299c27be\",\n  {\n    finitePagination: true,\n  }\n);\n\nconst refreshPage = () => {\n  window.location.reload();\n};\n\nconst validInitialConsonants = new Set([\n  \"ㄱ\",\n  \"ㄲ\",\n  \"ㄴ\",\n  \"ㄷ\",\n  \"ㄸ\",\n  \"ㄹ\",\n  \"ㅁ\",\n  \"ㅂ\",\n  \"ㅃ\",\n  \"ㅅ\",\n  \"ㅆ\",\n  \"ㅇ\",\n  \"ㅈ\",\n  \"ㅉ\",\n  \"ㅊ\",\n  \"ㅋ\",\n  \"ㅌ\",\n  \"ㅍ\",\n  \"ㅎ\",\n]);\n\nconst doubleConsonants = {\n  ㄳ: [\"ㄱ\", \"ㅅ\"],\n  ㄵ: [\"ㄴ\", \"ㅈ\"],\n  ㄶ: [\"ㄴ\", \"ㅎ\"],\n  ㄺ: [\"ㄹ\", \"ㄱ\"],\n  ㄻ: [\"ㄹ\", \"ㅁ\"],\n  ㄼ: [\"ㄹ\", \"ㅂ\"],\n  ㄽ: [\"ㄹ\", \"ㅅ\"],\n  ㄾ: [\"ㄹ\", \"ㅌ\"],\n  ㄿ: [\"ㄹ\", \"ㅍ\"],\n  ㅀ: [\"ㄹ\", \"ㅎ\"],\n  ㅄ: [\"ㅂ\", \"ㅅ\"],\n};\n\nconst segmentConsonants = input => {\n  const result = [];\n\n  for (const r of input) {\n    if (validInitialConsonants.has(r)) {\n      result.push(r);\n    } else if (doubleConsonants[r]) {\n      result.push(...doubleConsonants[r]);\n    } else {\n      result.push(r);\n    }\n  }\n\n  return result.join(\"\");\n};\n\n\nconst App = () => {\n  // const [filterLyrics, setFilterLyrics] = useState(false);\n  const { t, i18n } = useTranslation();\n\n  const changeLanguage = (lng) => {\n    i18n.changeLanguage(lng);\n  };\n\n  const queryHook = (query, refine) => {\n    const segmentedQuery = segmentConsonants(query);\n    // const finalQuery = filterLyrics ? `lyrics:${segmentedQuery}` : segmentedQuery;\n    refine(segmentedQuery);\n  };\n  \n  return (\n    <div className=\"ais-InstantSearch\">\n      <div className=\"language-switcher\">\n        <select onChange={(e) => changeLanguage(e.target.value)} defaultValue={i18n.language}>\n          <option value=\"ko\">한국어</option>\n          <option value=\"en\">English</option>\n          <option value=\"ru\">Русский</option>\n          <option value=\"ja\">日本語</option>\n          <option value=\"es\">Español</option>\n          <option value=\"fr\">Français</option>\n        </select>\n      </div>\n      <h1>\n        <a\n          href=\"#\"\n          onClick={refreshPage}\n          style={{\n            cursor: \"pointer\",\n            color: \"inherit\",\n            textDecoration: \"inherit\",\n          }}\n        >\n          {t(\"welcome\")}\n        </a>\n      </h1>\n      <h2>\n        {t(\"searchSong\")}{\" \"}\n        <span role=\"img\" aria-label=\"emoji\">\n          🎤\n        </span>\n      </h2>\n      <p>{t(\"description\")}</p>\n      <InstantSearch indexName=\"songs\" searchClient={searchClient}>\n        <div className=\"left-panel\">\n          {/* <ClearRefinements /> */}\n          <SortBy\n            defaultrefinement=\"songs\"\n            items={[{ value: \"songs\", label: t(\"relevancyLabel\") }]}\n          />\n          <h2>{t(\"country\")}</h2>\n          <RefinementList attribute=\"country\" />\n          <Configure\n            hitsPerPage={8}\n            attributesToSnippet={[\"description:50\"]}\n            snippetEllipsisText={\"...\"}\n            // filters={filterLyrics ? 'lyrics != \"\"' : ''}\n          />\n          {/* <button onClick={() => setFilterLyrics(!filterLyrics)}>\n            {filterLyrics ? \"Show All Results\" : \"Show Only Lyrics Matches\"}\n          </button> */}\n        </div>\n        <div className=\"right-panel\">\n          <SearchBox\n            autoFocus\n            placeholder={t(\"searchPlaceholder\")}\n            queryHook={queryHook}\n          />\n          <Hits hitComponent={Hit} />\n          <Pagination showLast={true} totalPages={14} />\n        </div>\n      </InstantSearch>\n      <footer className=\"footer\">\n        <p>Created by <a href=\"mailto:ikr@kakao.com\">ikr@kakao.com</a></p>\n      </footer>\n    </div>\n  );\n};\n\nconst Hit = ({ hit }) => {\n  const { t } = useTranslation();\n\n  // Function to extract and display matched lyrics snippet\n  const getMatchedLyricsSnippet = (highlightedLyrics) => {\n    const snippet = highlightedLyrics.value;\n\n    // Find the position of the highlighted tag\n    const highlightTagStart = snippet.indexOf('<mark>');\n    const highlightTagEnd = snippet.indexOf('</mark>', highlightTagStart) + 7; // length of </mark> is 7\n\n    if (highlightTagStart === -1 || highlightTagEnd === -1) {\n      return null;\n    }\n\n    // Extract the highlighted text\n    const highlightedText = snippet.slice(highlightTagStart, highlightTagEnd);\n\n    // Find word boundaries before and after the highlight to avoid cutting in the middle of words or tags\n    const contextBeforeStart = snippet.lastIndexOf(' ', Math.max(0, highlightTagStart - 30));\n    const contextBefore = snippet.slice(contextBeforeStart, highlightTagStart);\n\n    const contextAfterEnd = snippet.indexOf(' ', Math.min(snippet.length, highlightTagEnd + 30));\n    const contextAfter = snippet.slice(highlightTagEnd, contextAfterEnd);\n\n    // Combine the context and the highlighted part\n    const contextSnippet = `${t(\"lyrics\")}: ... ${contextBefore} ${highlightedText} ${contextAfter} ...`;\n\n    return (\n      <div className=\"hit-lyrics-snippet\">\n        <span dangerouslySetInnerHTML={{ __html: contextSnippet }} />\n      </div>\n    );\n  };\n\n  const lyricsSnippet = hit._highlightResult && hit._highlightResult.lyrics ? getMatchedLyricsSnippet(hit._highlightResult.lyrics) : null;\n\n  return (\n    <div key={hit.id}>\n      <div className=\"hit-title\">\n        <span>({hit.id}) </span>\n        <Highlight attribute=\"title\" hit={hit} tagName=\"mark\" />\n      </div>\n      <div className=\"hit-singer\">\n        <Snippet attribute=\"singer\" hit={hit} tagName=\"mark\" />\n      </div>\n      {lyricsSnippet}\n      {hit.youtube_url && (\n        <div className=\"hit-info\">\n          <a\n            href={hit.youtube_url}\n            className=\"custom-button\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n            @YouTube {t(\"search\")}\n          </a>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n","import React, { Suspense } from 'react';\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./i18n\";\nimport \"./index.css\";\nif (typeof process === 'undefined') {\n  global.process = { env: {} };\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <Suspense fallback={<div>Loading...</div>}>\n      <App />\n    </Suspense>\n  </React.StrictMode>,\n  document.getElementById('root')\n);","// src/i18n.js\r\nimport i18n from \"i18next\";\r\nimport LanguageDetector from \"i18next-browser-languagedetector\";\r\nimport { initReactI18next } from \"react-i18next\";\r\n\r\nimport translationEN from \"./locales/en/translation.json\";\r\nimport translationES from \"./locales/es/translation.json\";\r\nimport translationFR from \"./locales/fr/translation.json\";\r\nimport translationJA from \"./locales/ja/translation.json\";\r\nimport translationKO from \"./locales/ko/translation.json\";\r\nimport translationRU from \"./locales/ru/translation.json\";\r\n\r\nconst resources = {\r\n  ko: {\r\n    translation: translationKO,\r\n  },\r\n  en: {\r\n    translation: translationEN,\r\n  },\r\n  ru: {\r\n    translation: translationRU,\r\n  },\r\n  ja: {\r\n    translation: translationJA,\r\n  },\r\n  es: {\r\n    translation: translationES,\r\n  },\r\n  fr: {\r\n    translation: translationFR,\r\n  },\r\n};\r\n\r\ni18n\r\n  .use(initReactI18next) // passes i18n down to react-i18next\r\n  .use(LanguageDetector) // detect user language\r\n  .init({\r\n    resources,\r\n    lng: \"ko\",\r\n    fallbackLng: \"ko\", // fallback language\r\n    debug: false, // set to false in production\r\n    interpolation: {\r\n      escapeValue: false, // react already safes from xss\r\n    },\r\n  });\r\n\r\nexport default i18n;\r\n"],"sourceRoot":""}